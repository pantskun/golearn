<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta http-equiv="Cache-Control" content="no-cache,no-store">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <link rel="icon" href="/app/ezt/favicon.ico">
  <title>e证通</title>
  <style>
    * {
      padding: 0;
      margin: 0;
      border: 0;
      box-sizing: border-box;
    }

    html,
    body {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    img {
      border: 0;
      width: 100%;
    }

    #mobile,
    #pc {
      display: none;
      position: relative;
      width: 100%;
      height: 100%;
      background: #140047;
      overflow-y: auto;
    }

    #mobile {
      background: #140047 url("./download2/mobile-bg.png") no-repeat fixed bottom center;
      background-size: 100% 100%;
    }

    #pc {
      background: #140047 url("./download2/bg.png") no-repeat fixed top center;
      background-size: 100% 100%;
    }
    #skin {
      background: url(./download2/skin.png) no-repeat fixed bottom center;
      z-index: 2;
      background-size: auto 100%;
      width: 100%;
      height: 100%;
    }
    .app-des {
      position: absolute;
      top: 160px;
      left: 70%;
      width: 112px;
      text-align: center;
      color: #fff;
    }
    .app-name {
      font-size: 26px;
    }
    .des {
      font-size: 14px;
    }
    .logo {
      width: 84px;
    }
    .app-code {
      position: absolute;
      top: 354px;
      left: 70%;
      width: 112px;
      height: 160px;
      border-radius: 10px;
      background: #fff;
      text-align: center;
      padding-top: 20px;
    }
    .code {
      width: 86px;
    }
    .hint {
      color: #1b1b1b;
      font-size: 12px;
      transform: scale(0.8);
    }
    .container {
      overflow-x: auto;
      padding-bottom: 15px;
      height: calc(100% - 166px);
    }
    .mobile-imgs {
      height: 100%;
      display: flex;
      float: left;
      min-width: 100%;
    }
    .mobile-img {
      height: 100%;
      margin-right: 10px;
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
      flex: 3;
      -webkit-align-items: center;
      -ms-flex-align: center;
      align-items: center;
    }
    .mobile-img:first-child {
      margin-left: 20px;
    }
    .mobile-img:last-child {
      margin-right: 20px;
    }
    .header-logo {  
      width: 50px;
      height: 50px;
    }
    .header {
      padding: 20px 20px 14px;
    }
    .header-text {
      color: #fff;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
      display:inline-block;
      vertical-align: super;
      font-size: 14px;
      margin-left: 5px;
    }
    .header-name {
      font-size: 24px;
    }

    .fixed {
      position: absolute;
      z-index: 2;
      left: 50%;
      margin-left: -138px;
    }

    .btn {
      margin: 0 auto;
      padding: 5px 0;
      width: 276px;
      color: #fff;
      -webkit-border-radius: 10px;
      -moz-border-radius: 10x;
      -o-border-radius: 10px;
      -ms-border-radius: 10px;
      border-radius: 10px;
      text-align: center;
      background: #64ba42;
      margin-bottom: 15px;
    }
    .ios-btn {
      background: #222;
    }

    #tip {
      display: none;
      position: fixed;
      z-index: 10;
      top: 12px;
      right: 8px;
      height: 28px;
      line-height: 28px;
      padding: 0 12px;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      -o-border-radius: 4px;
      -ms-border-radius: 4px;
      border-radius: 4px;
      background: rgba(255, 255, 255, .5);
      color: #fff;
      font-size: 14px;
    }

    #tip::before {
      content: '';
      position: fixed;
      z-index: -1;
      top: 4px;
      right: 22px;
      width: 0;
      height: 0;
      border-bottom: 8px solid rgba(255, 255, 255, .5);
      border-right: 8px solid transparent;
      border-left: 8px solid transparent;
    }

    .icon {
      width: 20px;
      margin-right: 4px;
    }

    .text1 {
      height: 25px;
      line-height: 25px;
      font-size: 18px;
      vertical-align: super;
    }

    .text2 {
      font-size: 12px;
      line-height: 17px;
      color: #fff;
    }
  </style>
</head>

<body>
  <div id="mobile">
    <div class="header">
      <img class="header-logo" src="./download2/e_logo.png"/>
      <div class="header-text">
          <div class="header-name">e证通</div>
          <p class="header-des">上交所一站式金融信息服务平台</p>
      </div>
    </div>
    <div class="container">
        <div class="mobile-imgs">
            <img class="mobile-img" src="./download2/mobile1.png"/>
            <img class="mobile-img" src="./download2/mobile2.png"/>
            <img class="mobile-img" src="./download2/mobile3.png"/>
            <img class="mobile-img" src="./download2/mobile4.png"/>
          <!-- <img src="./download2/pics.png"/> -->
        </div>
    </div>
    <div class="fixed">
      <div class="btn" id="android-download" onClick="download('android')">
        <p>
          <img class="icon" src="./download2/icon-and.png" alt="android">
          <span class="text1">立即下载</span>
        </p>
        <p class="text2">Android 4.3版本及以上</p>
      </div>
      <div class="btn ios-btn" id="ios-download" onClick="download('ios')">
        <p>
          <img class="icon" src="./download2/icon-ios.png" alt="ios">
          <span class="text1">去App Store下载</span>
        </p>
        <p class="text2">iOS 9.0版本及以上</p>
      </div>
    </div>
  </div>
  <div id="pc">
    <div id="skin"></div>
    <div class="app-des">
        <img class="logo" src="./download2/e_logo.png"/>
        <div class="app-name">e证通</div>
        <p class="des">上交所一站式金</p>
        <p class="des">融信息服务平台</p>
    </div>
    <div class="app-code">
        <img class="code" src="./download2/code.png"/>
        <p class="hint">扫描二维码</p>
        <p class="hint">下载手机客户端</p>
    </div>
  </div>
  <div id="tip">
    请前往浏览器进行下载
  </div>
  <script>
    var browser = {
      os: function () {
        var u = navigator.userAgent;
        return {
          trident: u.indexOf('Trident') > -1, //IE内核
          presto: u.indexOf('Presto') > -1, //opera内核
          webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
          gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
          mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
          ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
          android: u.indexOf('Android') > -1 || u.indexOf('Adr') > -1, //android终端
          iPhone: u.indexOf('iPhone') > -1, //是否为iPhone或者QQHD浏览器
          iPad: u.indexOf('iPad') > -1, //是否iPad
          webApp: u.indexOf('Safari') == -1, //是否web应用程序，没有头部与底部
          weixin: u.indexOf('MicroMessenger') > -1, //是否微信 （2015-01-22新增）
          qq: u.match(/\sQQ/i) == " qq" //是否QQ
        }
      }()
    };

    if (browser.os.mobile && (browser.os.android || browser.os.iPhone || browser.os.iPad)) {
      $("mobile").style.display = "block"
      if (browser.os.weixin) {
        $("tip").style.display = "block"
      }
      if(browser.os.android) {
        $("ios-download").style.display = "none"
      } else if (browser.os.iPhone || browser.os.iPad) {
        $("android-download").style.display = "none"
      }
    } else {
      $("pc").style.display = "block"
    }
    var testApi = "https://58.246.60.232:8886/tech/bmg-test/ezt/calendar/other/newAppUrl"
    var prodApi = "https://m.uap.sse.com.cn/bmg/ezt/calendar/other/newAppUrl"
    var androidUrl="https://mc_lollipop-generic.pkg.coding.net/TechApp-Android/ezt_app_test/ezt_prd_1.4.1_2020_09_07_ssetech_release_141_jiagu_sign.apk?version=latest"
    // var androidUrl = "https://data.ssetech.com.cn/bmg/ezt/download/ezt_prd_1.3.3_2019_11_01_ssetech_release_133_jiagu_sign.apk"; 
    // window.onload = function() {
    //   var imageObjs = document.getElementsByClassName("mobile-img")
    //   var imageHeight = imageObjs[0].offsetHeight
    //   var imageWidth = imageHeight/1.875
    //   for(var i = 0; i<4; i++ ) {
    //     imageObjs[i].style.width = imageWidth + "px"
    //   }
    //   $.ajax({
    //     url:prodApi,
    //     type:"POST",
    //     data:JSON.stringify({id:"123"}),
    //     dataType:"json",
    //     contentType: 'application/json',
    //     success:function(res){
    //       if(res&&res.result){
    //         androidUrl= res.result
    //       }
    //     }
    //   })
    // }

    //下载
    function download(os) {
      if ((browser.os.android && os == "android") || ((browser.os.iPhone || browser.os.iPad) && os == "ios")) {
        var iosUrl = "https://itunes.apple.com/cn/app/e证通-科创板-网下ipo/id1455649142?l=zh&ls=1&mt=8";
        var url_ios = 'wx43770423f476aa7f://com.sse.tech.ezt'; // ios自动打开地址
        var url_android = 'ezt://sse.com.cn/Home/splash'; // android自动打开地址
        var path = os == "ios" ? url_ios : url_android;
        var downloadUrl =  os == "ios" ? iosUrl : androidUrl;
        var loadDateTime = new Date();
        window.location = path; // schema链接或univerasl link

        window.setTimeout(function(){
          let timeOutDateTime = new Date()
          if(timeOutDateTime - loadDateTime < 5000) {
            window.location = downloadUrl // 下载地址
          } else {
            window.close()
          }
        },3000)
      }
    }
    function $(el) {
      return document.getElementById(el)
    }
  </script>
</body>
<!-- <script src="./download2/jquery-3.1.1.min.js"></script> -->
</html>